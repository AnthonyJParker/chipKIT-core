<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>A Guide on How to Hack the chipKIT-core</title>

    <!-- Put the next two lines in every file -->
    <script src="js/w3data.js"></script>
    <div w3-include-html="_indludes/bootstrap_head.html"></div>
</head>

<body >
<!-- This next line creates the menu for the site -->
<div w3-include-html="_includes/menu.html"></div>

<div class="panel-body">

    <h1>A Guide on How to Hack the <span class=SpellE>chipKIT</span>-core</h1>

    <p class=MsoNormal>By: Jacob Christ from pontech.com and Quick240.com</p>

    <p class=MsoNormal>This guide was written as a starting point for anyone that
        is wishing to help improve the <span class=SpellE>chipKIT</span>-core API’s.</p>

    <h1>What is <span class=SpellE>chipKIT</span></h1>

    <p class=MsoNormal>The <span class=SpellE>chipKIT</span> project started as fork
        of the Arduino IDE, plus its Wiring API as implemented for the Atmel AVR, with
        the express goal of making the tools work with the Microchip PIC32
        microcontroller.<span style='mso-spacerun:yes'>  </span>Although the project
        started with the Microchip PIC32, the ultimate goal was to allow the growing
        number of people familiar with the Wiring API to use any microcontroller they
        wanted with a “Multi-Platform” IDE.<span style='mso-spacerun:yes'>  </span>The forked
        Arduino IDE was renamed to MPIDE for Multi-Platform IDE and initially supported
        both Atmel AVR and Microchip PIC32 devices.</p>

    <h1>MPIDE is dead, long live MPIDE</h1>

    <p class=MsoNormal>As the Arduino community to expand their offerings to include
        the Arduino Due which was implemented with an Atmel SAM ARM processors they
        needed to change the Arduino IDE to support this new architecture.<span
                style='mso-spacerun:yes'>  </span>This was accomplished by pulling changes from
        MPIDE back into the <span class=SpellE>Arudino</span> IDE.<span
                style='mso-spacerun:yes'>  </span>Around version 1.6.5 of the Arduino IDE
        became the multi-platform IDE that MPIDE had always yearned to be.<span
                style='mso-spacerun:yes'>  </span>With this the <span class=SpellE>chipKIT</span>
        team dropped further MPIDE development in favor turning the ported PIC32
        libraries into what is known at the <span class=SpellE>chipKIT</span>-core.<span
                style='mso-spacerun:yes'>  </span>The <span class=SpellE>chipKIT</span>-core
        can now be installed within the Arduino IDE Boards manager like many other
        cores for other boards and processor types.</p>

    <h1><span class=SpellE>chipKIT</span>-core</h1>

    <p class=MsoNormal>The <span class=SpellE>chipKIT</span>-core project as it
        exists on <span class=SpellE>github</span> consists of the implementation of
        the Wiring API as implemented for the PIC32 plus Java ANT build scripts that
        allow for distributions to be built for multiple platforms including Windows,
        Mac OSX, Linux and Arm processors (Such as the <span class=SpellE>RaspPI</span>).<span
                style='mso-spacerun:yes'>  </span>The <span class=SpellE>chipKIT</span>-core at
        best is very useful in getting a PIC32 processor to do you bidding, at its
        worse its incomplete and needs help to improve it.</p>

    <h1>Sketchbooks, libraries and hardware</h1>

    <p class=MsoNormal>If you know how to program but are new to Arduino or <span
            class=SpellE>chipKIT</span> there are a few hurdles to overcome.<span
            style='mso-spacerun:yes'>  </span>Even if you have done a little programing on
        the Arduino platform there are a few things that should be pointed out if you
        want to hack on the <span class=SpellE>chipKIT</span>-core.</p>

    <p class=MsoListParagraphCxSpFirst style='text-indent:-.25in;mso-list:l0 level1 lfo1'><![if !supportLists]><span
            style='font-family:Symbol;mso-fareast-font-family:Symbol;mso-bidi-font-family:
Symbol'><span style='mso-list:Ignore'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]>Programs are called sketches (like an artist’s
        sketch)</p>

    <p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in;mso-list:l0 level1 lfo1'><![if !supportLists]><span
            style='font-family:Symbol;mso-fareast-font-family:Symbol;mso-bidi-font-family:
Symbol'><span style='mso-list:Ignore'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]>They are stored in a folder called the
        “Sketchbook”</p>

    <p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in;mso-list:l0 level1 lfo1'><![if !supportLists]><span
            style='font-family:Symbol;mso-fareast-font-family:Symbol;mso-bidi-font-family:
Symbol'><span style='mso-list:Ignore'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]>The “Sketchbook” folder is set from the
        preferences dialog box accessible from the File menu.</p>

    <p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in;mso-list:l0 level1 lfo1'><![if !supportLists]><span
            style='font-family:Symbol;mso-fareast-font-family:Symbol;mso-bidi-font-family:
Symbol'><span style='mso-list:Ignore'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]>Sketches can use “libraries” that come with the
        IDE which is NOT to be confused with the following:</p>

    <p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in;mso-list:l0 level1 lfo1'><![if !supportLists]><span
            style='font-family:Symbol;mso-fareast-font-family:Symbol;mso-bidi-font-family:
Symbol'><span style='mso-list:Ignore'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]>The “Sketchbook” folder can have a sub folder
        called “libraries” that is used to house contributed libraries that you make
        yourself or are made by others.</p>

    <p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in;mso-list:l0 level1 lfo1'><![if !supportLists]><span
            style='font-family:Symbol;mso-fareast-font-family:Symbol;mso-bidi-font-family:
Symbol'><span style='mso-list:Ignore'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]>Additional cores can be added to the IDE by
        adding a links to the “Additional Boards Manager URL’s” in the preference
        dialog box as described <a
                href="https://quick240.com/quicki/_media/chipkit:installing_and_using_the_arduino_ide_development_tool.pdf">here</a>.<span
                style='mso-spacerun:yes'>  </span>The additional cores are added into the
        “hardware” folder of for the IDE which is NOT to be confused with the
        following:</p>

    <p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in;mso-list:l0 level1 lfo1'><![if !supportLists]><span
            style='font-family:Symbol;mso-fareast-font-family:Symbol;mso-bidi-font-family:
Symbol'><span style='mso-list:Ignore'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]>The “Sketchbook” folder can have a sub folder
        called “hardware” that is used give the IDE access to compiler and APIs not
        accessible in the default download of the IDE.</p>

    <p class=MsoListParagraphCxSpLast style='text-indent:-.25in;mso-list:l0 level1 lfo1'><![if !supportLists]><span
            style='font-family:Symbol;mso-fareast-font-family:Symbol;mso-bidi-font-family:
Symbol'><span style='mso-list:Ignore'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]>Whenever you make a change to any of these
        folders are where the IDE is looking for them you need to restart the IDE, it’s
        just not that smart.</p>

    <h1>How to install <span class=SpellE>chipKIT</span>-core</h1>

    <p class=MsoNormal>The <a
            href="http://chipkit.net/wiki/index.php?title=ChipKIT_core"><span class=SpellE>chipKIT</span>
        wiki</a> describes two ways to install a <span class=SpellE>chipKIT</span>-core.</p>

    <p class=MsoListParagraphCxSpFirst style='text-indent:-.25in;mso-list:l3 level1 lfo3'><![if !supportLists]><span
            style='mso-bidi-font-family:Calibri;mso-bidi-theme-font:minor-latin'><span
            style='mso-list:Ignore'>1.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]>Auto install via URL from within Arduino IDE</p>

    <p class=MsoListParagraphCxSpLast style='text-indent:-.25in;mso-list:l3 level1 lfo3'><![if !supportLists]><span
            style='mso-bidi-font-family:Calibri;mso-bidi-theme-font:minor-latin'><span
            style='mso-list:Ignore'>2.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]>Manual install by copying ZIP file</p>

    <p class=MsoNormal>The auto install will put the <span class=SpellE>chipKIT</span>-core
        into a place that is hidden from you but accessible by the Arduino IDE.<span
                style='mso-spacerun:yes'>  </span>On my computer, it puts it here: </p>

    <p class=MsoNormal>C:\Users\Jacob Christ\<span class=SpellE>AppData</span>\Local\Arduino15\packages</p>

    <p class=MsoNormal>The manual install is better for hacking since it gets put
        into the <span class=SpellE>Arduio</span>/hardware folder but for best results
        I recommend linking the <span class=SpellE>git</span> <span class=SpellE>chipKIT</span>-core
        repo to this directory as explained below.</p>

    <h1>The <span class=SpellE>chipKIT</span>-core Repository</h1>

    <p class=MsoNormal>The <span class=SpellE>chipKIT</span>-core repository is maintained
        on <span class=SpellE>github</span>: <a
                href="https://github.com/chipKIT32/chipKIT-core">https://github.com/chipKIT32/chipKIT-core</a></p>

    <p class=MsoNormal>DON’T FOR GET TO UPDATE YOUR SUBMODULES!</p>

    <p class=MsoNormal>You can download, hack and contribute to the repository
        without using <span class=SpellE>git</span>, but if you plan on doing a lot of
        work on the repo or any other programming for that matter then it’s time to
        learn <span class=SpellE>git</span>.<span style='mso-spacerun:yes'> 
</span>Learning and using <span class=SpellE>git</span> is outside the scope of
        this document but there is plenty of information on how to use it out there.</p>

    <h1>…\<span class=SpellE>chipKIT</span>-core\</h1>

    <p class=MsoNormal>Once you have cloned the repo you will have a <span
            class=SpellE>chipKIT</span>-core folder (unless you renamed it).<span
            style='mso-spacerun:yes'>  </span>Inside this folder you have the following
        folders:</p>

    <h2>…\docs</h2>

    <p class=MsoNormal>This is where the <span class=SpellE>chipKIT</span>-core
        commit specific documentation lives.</p>

    <h2>…\pic32</h2>

    <p class=MsoNormal>This is where the <span class=SpellE>chipKIT</span>-core
        Wiring API’s live.</p>

    <h2>…\tests</h2>

    <p class=MsoNormal>As well as a smattering of other files:</p>

    <h2>…\build.xml</h2>

    <p class=MsoNormal>Used by ANT to create the <span class=SpellE>chipKIT</span>-core
        distributions</p>

    <h2>…\LICENSE</h2>

    <p class=MsoNormal>The license file</p>

    <h2>…\<span class=SpellE>package_chipkit_index.json</span></h2>

    <p class=MsoNormal>A publicly visible file <span class=SpellE>json</span> file
        that tells the Arduino IDE how to install specific versions of <span
                class=SpellE>chipKIT</span>-core</p>

    <h2>…\README.md</h2>

    <p class=MsoNormal>The <span class=SpellE>chipKIT</span>-core license file</p>

    <h2>…\<span class=SpellE>version.properties</span></h2>

    <p class=MsoNormal>I’m not really sure what this file is for, I think it’s used
        by ANT</p>

    <h1>How I Hack <span class=SpellE>chipKIT</span>-core (in Windows)</h1>

    <p class=MsoNormal>When I’m hacking the core, I’m doing it with the sole
        intention of making it better for myself and the community.<span
                style='mso-spacerun:yes'>  </span>Because of this I want to make it very easy
        for me to get my changes pushed back up to <span class=SpellE>github</span> so
        that I can make a pull request.<span style='mso-spacerun:yes'>  </span>Some
        might suggest modifying the files in your installed version of the core then
        copying them back to your cloned repo when you are ready to commit.<span
                style='mso-spacerun:yes'>  </span>I’m a bit lazier and prefer to operate
        directly on the core itself.<span style='mso-spacerun:yes'>  </span><span
                class=SpellE>Basicly</span> it works like this.<span style='mso-spacerun:yes'> 
</span>Clone <span class=SpellE>chipKIT</span> core into its own
        directory.<span style='mso-spacerun:yes'>  </span>Then create a symbolic
        directory link from your hardware folder in your sketchbook directory to the <span
                class=SpellE>chipKIT</span>-core repository.<span style='mso-spacerun:yes'> 
</span>Build a distribution of the core in the <span class=SpellE>chipKIT</span>-core
        repository then copy compiler and tools directory from the build distribution
        back down to the pic32 directory in the <span class=SpellE>chipKIT</span>-core
        repo.</p>

    <p class=MsoNormal>Here is how I accomplished this in windows:</p>

    <p class=MsoNoSpacing style='margin-left:.5in;text-indent:-.25in;mso-list:l2 level1 lfo4'><![if !supportLists]><span
            style='font-family:Symbol;mso-fareast-font-family:Symbol;mso-bidi-font-family:
Symbol'><span style='mso-list:Ignore'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]>Open <span class=SpellE>cmd</span> prompt as
        administrator</p>

    <p class=MsoNoSpacing style='margin-left:.5in;text-indent:-.25in;mso-list:l2 level1 lfo4'><![if !supportLists]><span
            style='font-family:Symbol;mso-fareast-font-family:Symbol;mso-bidi-font-family:
Symbol'><span style='mso-list:Ignore'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]>cd c:/sketchbook_folder/</p>

    <p class=MsoNoSpacing style='margin-left:.5in;text-indent:-.25in;mso-list:l2 level1 lfo4'><![if !supportLists]><span
            style='font-family:Symbol;mso-fareast-font-family:Symbol;mso-bidi-font-family:
Symbol'><span style='mso-list:Ignore'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span class=SpellE>mkdir</span> hardware</p>

    <p class=MsoNoSpacing style='margin-left:.5in;text-indent:-.25in;mso-list:l2 level1 lfo4'><![if !supportLists]><span
            style='font-family:Symbol;mso-fareast-font-family:Symbol;mso-bidi-font-family:
Symbol'><span style='mso-list:Ignore'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]>cd hardware</p>

    <p class=MsoNoSpacing style='margin-left:.5in;text-indent:-.25in;mso-list:l2 level1 lfo4'><![if !supportLists]><span
            style='font-family:Symbol;mso-fareast-font-family:Symbol;mso-bidi-font-family:
Symbol'><span style='mso-list:Ignore'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span class=SpellE>mkdir</span> <span
            class=SpellE>chipkit</span>-core</p>

    <p class=MsoNoSpacing style='margin-left:.5in;text-indent:-.25in;mso-list:l2 level1 lfo4'><![if !supportLists]><span
            style='font-family:Symbol;mso-fareast-font-family:Symbol;mso-bidi-font-family:
Symbol'><span style='mso-list:Ignore'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]>cd <span class=SpellE>chipkit</span>-core</p>

    <p class=MsoNoSpacing style='margin-left:.5in;text-indent:-.25in;mso-list:l2 level1 lfo4'><![if !supportLists]><span
            style='font-family:Symbol;mso-fareast-font-family:Symbol;mso-bidi-font-family:
Symbol'><span style='mso-list:Ignore'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span class=SpellE>mklink</span> pic32
        c:\path_to_repos\chipKIT-core\pic32</p>

    <p class=MsoNoSpacing style='margin-left:.5in;text-indent:-.25in;mso-list:l2 level1 lfo4'><![if !supportLists]><span
            style='font-family:Symbol;mso-fareast-font-family:Symbol;mso-bidi-font-family:
Symbol'><span style='mso-list:Ignore'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]>cd c:\path_to_repos\chipKIT-core</p>

    <p class=MsoNoSpacing style='margin-left:.5in;text-indent:-.25in;mso-list:l2 level1 lfo4'><![if !supportLists]><span
            style='font-family:Symbol;mso-fareast-font-family:Symbol;mso-bidi-font-family:
Symbol'><span style='mso-list:Ignore'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]>ant build</p>

    <p class=MsoNoSpacing style='margin-left:.5in;text-indent:-.25in;mso-list:l2 level1 lfo4'><![if !supportLists]><span
            style='font-family:Symbol;mso-fareast-font-family:Symbol;mso-bidi-font-family:
Symbol'><span style='mso-list:Ignore'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]>wait 10+ minutes for build to complete</p>

    <p class=MsoNoSpacing style='margin-left:.5in;text-indent:-.25in;mso-list:l2 level1 lfo4'><![if !supportLists]><span
            style='font-family:Symbol;mso-fareast-font-family:Symbol;mso-bidi-font-family:
Symbol'><span style='mso-list:Ignore'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]>The next steps I do with the Windows file
        explorer</p>

    <p class=MsoNoSpacing style='margin-left:1.0in;text-indent:-.25in;mso-list:
l2 level2 lfo4'><![if !supportLists]><span style='font-family:"Courier New";
mso-fareast-font-family:"Courier New"'><span style='mso-list:Ignore'>o<span
            style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span></span><![endif]>copy
        the compiler and tools folder from c:\path_to_repos\chipKIT-core\dist\windows\chipkit-core\pic32
        to c:\path_to_repos\chipKIT-core\pic32</p>

    <p class=MsoNormal><span style='mso-fareast-font-family:"Times New Roman";
color:#222222'><o:p>&nbsp;</o:p></span></p>

    <p class=MsoNormal><span style='mso-fareast-font-family:"Times New Roman";
color:#222222'>If you have auto installed <span class=SpellE>chipKIT</span>-core,
when you restart the IDE you will now have two copies of the <span
                class=SpellE>chipKIT</span> in your boards menu.<span
                style='mso-spacerun:yes'>  </span>To make it clear which version is my hackable
version I modify platform.txt and change the name parameter to read:<o:p></o:p></span></p>

    <p class=MsoNormal><span style='mso-fareast-font-family:"Times New Roman";
color:#222222'>name=<span class=SpellE>chipKIT</span> (<span class=SpellE>git</span>)<o:p></o:p></span></p>

    <p class=MsoNormal>Remember you must start the Arduino IDE for this change to
        take place.<span style='mso-spacerun:yes'>  </span>Happy hacking…</p>

    <h1>Installing ANT</h1>

    <p class=MsoNormal>The previous section mentioned using ANT to build the
        distribution.<span style='mso-spacerun:yes'>  </span>Instructions for
        installing ANT can be found here:</p>

    <p class=MsoNormal><a href="http://ant.apache.org/">http://ant.apache.org/</a></p>

    <p class=MsoNormal><o:p>&nbsp;</o:p></p>

</div>

<!-- Put the next three lines in every html file -->
<script>w3IncludeHTML();</script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script> <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script> <!-- Include all compiled plugins (below), or include individual files as needed -->

</body>

</html>
